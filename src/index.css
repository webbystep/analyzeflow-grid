@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================
   Animációk (edge flow / dashed highlight)
   ========================================= */
@keyframes edge-flow {
  to {
    stroke-dashoffset: -15;
  }
}

@keyframes dash {
  to {
    stroke-dashoffset: -10;
  }
}

.animate-dash {
  animation: dash 0.9s linear infinite;
}

/* =======================================================
   DESIGN SYSTEM TOKENEK
   - Dark-only "neon cockpit" stílusban
   ======================================================= */
@layer base {
  :root {
    /* DARK MODE TOKENS (ALAPÉRTELMEZETT) */
    --background: 0 0% 7.8%; /* #141414 */
    --foreground: 220 13% 91%; /* #E5E7EB */

    /* Felületek */
    --color-bg-canvas: 0 0% 7.8%; /* #141414 */
    --color-bg-panel: 195 5.6% 14.1%; /* #222526 */
    --color-bg-card: 195 5.6% 14.1%;
    --color-bg-elevated: 195 5.6% 14.1%;
    --color-bg-sidebar: 195 5.6% 14.1%;
    --color-bg-bottom-bar: 195 5.6% 14.1%;
    --color-bg-node-header: 195 5.6% 14.1%;
    --color-bg-node-body: 195 5.6% 14.1%;

    /* Határvonalak */
    --color-border-default: 200 2.6% 22.5%; /* #383a3b */
    --color-border-sidebar: 200 2.6% 22.5%;
    --color-border-active: 149.4 85.2% 52.2%; /* #1EED83 */

    /* Szöveg */
    --color-text-primary: 220 13% 91%; /* #E5E7EB */
    --color-text-secondary: 217.9 10.6% 64.9%; /* #9CA3AF */
    --color-text-invert: 219 41.7% 9.4%; /* #0E1522 */

    /* Accent (neon green) */
    --color-accent-green: 149.4 85.2% 52.2%; /* #1EED83 */
    --color-accent-green-rgb: 29, 237, 131;

    /* Header gombok */
    --color-header-btn-border: 200 2.6% 22.5%; /* #383a3b */
    --color-header-btn-bg: 0 0% 100% / 0; /* átlátszó */
    --color-header-btn-hover-bg: 210 4% 18%; /* #2e3031 */
    --color-header-btn-text: 220 13% 91%;

    /* CTA Share gomb */
    --color-share-bg: 149.4 85.2% 52.2%; /* #1EED83 */
    --color-share-text: 219 41.7% 9.4%; /* #0E1522 */
    --color-share-bg-hover: 149.4 85.2% 48%; /* picit sötétebb zöld */

    /* Glow effektek */
    --shadow-glow: 0 0 10px rgba(var(--color-accent-green-rgb), 0.25);
    --shadow-glow-strong: 0 0 20px rgba(var(--color-accent-green-rgb), 0.35);
  }
}

/* =========================================
   GLOBAL BASE STYLES / TYPO / TRANSITIONS
   ========================================= */
@layer base {
  * {
    @apply border-border;
    transition-property: background-color, border-color, color, fill, stroke;
    transition-duration: 200ms;
    transition-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
  }

  body {
    @apply bg-background text-foreground;
    font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Brand utilok */
  .brand-gradient {
    background: hsl(var(--color-accent-green));
  }

  .brand-gradient-text {
    background: hsl(var(--color-accent-green));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .tech-glow {
    box-shadow: var(--shadow-glow);
  }

  .tech-glow-strong {
    box-shadow: var(--shadow-glow-strong);
  }

  /* CANVAS GRID */
  .canvas-grid {
    background-color: hsl(var(--color-bg-canvas));
    background-image: radial-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px);
    background-size: 24px 24px;
  }
}

/* =========================================
   NODE KOMPONENS
   ========================================= */
@layer base {
  .node {
    background: hsl(var(--color-bg-node-body));
    border: 1px solid #383a3b;
    border-radius: 8px;
    color: hsl(var(--color-text-primary));
    min-width: 240px;
    max-width: 260px;
    box-shadow: none;
    transition: all 0.2s ease;
  }

  .node-header {
    background: hsl(var(--color-bg-node-header));
    border-bottom: 1px solid #383a3b;
    color: hsl(var(--color-text-primary));
    padding: 8px 10px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-weight: 600;
    font-size: 13px;
    line-height: 1.2;
  }

  .node-body {
    padding: 10px 12px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    color: hsl(var(--color-text-secondary));
    font-size: 12.5px;
    line-height: 1.4;
  }

  /* Hover: mindig solid zöld border + glow */
  .node:hover {
    border: 1px solid #1EED83 !important;
    box-shadow: 0 0 10px rgba(29, 237, 131, 0.25);
  }

  /* Aktív állapot */
  .node.is-active {
    border: 1px solid #1EED83 !important;
    box-shadow: 0 0 16px rgba(29, 237, 131, 0.35);
  }
}

/* =========================================
   SIDEBAR NODE KÁRTYÁK
   ========================================= */
@layer base {
  .sidebar-item {
    background: hsl(var(--color-bg-panel));
    border: 1px solid #383a3b !important;
    border-radius: 6px;
    padding: 10px 12px;
    color: hsl(var(--color-text-primary));
    display: flex;
    flex-direction: column;
    gap: 4px;
    transition: all 0.15s ease;
    font-size: 13px;
    line-height: 1.4;
  }

  .sidebar-item:hover {
    border-color: #1EED83 !important;
    color: #1EED83;
    box-shadow: 0 0 10px rgba(29, 237, 131, 0.25);
  }
}

/* =========================================
   HEADER GOMBOK
   ========================================= */
@layer base {
  .header-btn-secondary {
    background: transparent !important;
    border: 1px solid #383a3b !important;
    border-radius: 6px;
    color: hsl(var(--color-header-btn-text));
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    font-size: 13px;
    font-weight: 500;
    line-height: 1;
    padding: 6px 8px;
    cursor: pointer;
    transition: all 0.15s ease;
  }

  .header-btn-secondary:hover {
    background: #2e3031 !important;
    color: #1EED83 !important;
    box-shadow: 0 0 8px rgba(29, 237, 131, 0.4);
  }

  .header-btn-primary {
    background: #1EED83 !important;
    border: 1px solid #1EED83 !important;
    border-radius: 6px;
    color: #0E1522 !important;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    font-size: 13px;
    font-weight: 600;
    line-height: 1;
    padding: 6px 10px;
    cursor: pointer;
    transition: all 0.15s ease;
    box-shadow: 0 0 10px rgba(29, 237, 131, 0.25);
  }

  .header-btn-primary:hover {
    background: #19d773 !important;
    border-color: #19d773 !important;
    box-shadow: 0 0 14px rgba(29, 237, 131, 0.4);
    transform: translateY(-1px);
  }
}

/* =========================================
   REACT FLOW EDGE VISELKEDÉS
   ========================================= */
@layer base {
  /* baseline edge */
  .react-flow__edge-path {
    stroke: #383a3b !important;
    stroke-width: 1px !important;
    transition: all 0.2s ease;
    filter: none;
  }

  /* hover / selected */
  .react-flow__edge-path:hover,
  .react-flow__edge.selected .react-flow__edge-path,
  .react-flow__edge.is-active .react-flow__edge-path {
    stroke: #1EED83 !important;
    stroke-width: 2px !important;
    stroke-dasharray: 6 8 !important;
    filter: drop-shadow(0 0 6px rgba(29, 237, 131, 0.5));
  }

  /* dashed particle overlay */
  .edge-particles-overlay {
    stroke: #1EED83;
    stroke-width: 2px;
    stroke-dasharray: 6 8;
    stroke-linecap: round;
    animation: edge-flow 1.2s linear infinite;
    filter: drop-shadow(0 0 8px rgba(29, 237, 131, 0.6));
    pointer-events: none;
    opacity: 1;
  }
}

/* =========================================
   REACT FLOW EXTRA KONTROLLOK
   ========================================= */
@layer base {
  .react-flow__controls,
  .react-flow__minimap {
    background: hsl(var(--color-bg-panel));
    border: 1px solid #383a3b;
    border-radius: 0.5rem;
    box-shadow: 0 0 10px rgba(29, 237, 131, 0.05);
  }

  .react-flow__controls-button {
    background: hsl(var(--color-bg-card));
    border-bottom: 1px solid #383a3b;
    color: hsl(var(--color-text-primary));
    fill: hsl(var(--color-text-primary));
    transition: all 0.2s ease;
  }

  .react-flow__controls-button:hover {
    background: #1EED83;
    color: #0E1522;
    fill: #0E1522;
    box-shadow: 0 0 8px rgba(29, 237, 131, 0.4);
  }
}

/* =========================================
   ⚡ BRAND FINE-TUNING BLOKK
   (Dark-only design, neon zöld hangsúly)
   ========================================= */
